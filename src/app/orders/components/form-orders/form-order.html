<div class="container mx-auto px-4 py-8">
  <section class="w-full mx-auto">
    <div class="card">
      <h2 class="mb-6">Orden Form</h2>

      <form class="space-y-6" [formGroup]="form()" (ngSubmit)="onSubmit()">
        <div>
          <fieldset class="fieldset">
            <legend class="fieldset-legend">Tipo de orden</legend>
            <select class="select" formControlName="orderType">
              <option disabled selected value="">Seleccione un tipo</option>
              @for( type of typeOptions; track type ){
              <option value="{{ type.value }}">{{ type.label }}</option>
              }
            </select>

            @if (formUtils.isValidField(form(), 'orderType')) {
            <span class="text-red-500">{{ formUtils.getFieldError(form(), 'orderType') }}</span>
            }
          </fieldset>
        </div>

        <div>
          <fieldset class="fieldset">
            <legend class="fieldset-legend">Status</legend>
            <select class="select" formControlName="status">
              <option disabled selected value="">Seleccione el status</option>
              @for( status of statusOptions; track status ){
              <option value="{{ status.value }}">{{ status.label }}</option>
              }
            </select>

            @if (formUtils.isValidField(form(), 'status')) {
            <span class="text-red-500">{{ formUtils.getFieldError(form(), 'status') }}</span>
            }
          </fieldset>
        </div>

        <div>
          <fieldset class="fieldset">
            <legend class="fieldset-legend">Fecha de la orden</legend>
            <label class="input">
              <input type="date" formControlName="orderDate" />
            </label>

            @if (formUtils.isValidField(form(), 'orderDate')) {
            <span class="text-red-500">{{ formUtils.getFieldError(form(), 'orderDate') }}</span>
            }
          </fieldset>
        </div>

        <div>
          <fieldset class="fieldset">
            <legend class="fieldset-legend">Paciente</legend>
            <select class="select" formControlName="patientId">
              <option disabled selected value="">Seleccione el paciente</option>
              @for( patient of patients; track patient ){
              <option value="{{ patient.id }}">{{ patient.name }}</option>
              }
            </select>

            @if (formUtils.isValidField(form(), 'patientId')) {
            <span class="text-red-500">{{ formUtils.getFieldError(form(), 'patientId') }}</span>
            }
          </fieldset>
        </div>

        <div>
          <fieldset class="fieldset">
            <legend class="fieldset-legend">Doctor</legend>
            <select class="select" formControlName="doctorId">
              <option disabled selected value="">Seleccione el doctor</option>
              @for( doctor of doctors; track doctor ){
              <option value="{{ doctor.id }}">{{ doctor.name }}</option>
              }
            </select>

            @if (formUtils.isValidField(form(), 'doctorId')) {
            <span class="text-red-500">{{ formUtils.getFieldError(form(), 'doctorId') }}</span>
            }
          </fieldset>
        </div>

        <div class="flex justify-center space-x-4">
          <button type="button" class="btn btn-secondary" [routerLink]="cancelRoute()">
            <span class="hidden sm:inline">Cancel</span>
            <span class="sm:hidden">‚ùå</span>
          </button>
          <button
            type="submit"
            class="btn btn-primary"
            [disabled]="isSubmitBlocked()"
            [class.opacity-50]="isSubmitBlocked()"
            [class.cursor-not-allowed]="isSubmitBlocked()"
          >
            <span class="hidden sm:inline">{{
              isSubmitBlocked() ? 'Processing...' : submitButtonText()
            }}</span>
            <span class="sm:hidden">{{ isSubmitBlocked() ? '‚è≥' : 'üëë' }}</span>
          </button>
        </div>
      </form>
    </div>
  </section>
</div>
